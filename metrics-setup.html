<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="/_app/immutable/assets/0.8fGR2rR_.css" rel="stylesheet">
		<link href="/_app/immutable/assets/4.CmAfBVBj.css" rel="stylesheet">
		<link rel="modulepreload" href="/_app/immutable/entry/start.DMXjHYgb.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/DzXG9R0t.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/NmDJM5Y1.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/CPcTy3KG.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/Bkylkt_P.js">
		<link rel="modulepreload" href="/_app/immutable/entry/app.B2_qOav-.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/ncypFVzl.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/CUOLyuIT.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/I1aYGSGw.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/CddGJQiY.js">
		<link rel="modulepreload" href="/_app/immutable/nodes/0.qFlhzeyA.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/Ci4fSNTT.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/BZehQ7ua.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/Dj4kdlmF.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/BWjGUFSD.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/CZkoxaho.js">
		<link rel="modulepreload" href="/_app/immutable/nodes/4.DNYOju1w.js"><!--[--><!--]--><title>Chadburn - Metrics Setup</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><div class="app svelte-x4shkm"><header class="svelte-x4shkm"><div class="header-content svelte-x4shkm"><div class="site-header svelte-x4shkm"><a href="/" class="svelte-x4shkm"><span class="site-title svelte-x4shkm">Chadburn</span> <!--[!--><!--]--></a></div> <nav class="parent-nav svelte-17ect4i"><ul class="svelte-17ect4i"><!--[--><!--[!--><li class="svelte-17ect4i"><a href="/" class="svelte-17ect4i">Home</a></li><!--]--><!--[!--><li class="svelte-17ect4i"><a href="/getting-started" class="svelte-17ect4i">Documentation</a></li><!--]--><!--[--><li class="svelte-17ect4i"><a href="https://github.com/PremoWeb/Chadburn" target="_blank" rel="noopener noreferrer" class="svelte-17ect4i">GitHub <!--[--><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="svelte-17ect4i"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg><!--]--></a></li><!--]--><!--]--></ul></nav><!----></div></header> <!--[--><nav class="sub-nav svelte-sno2rq"><ul class="svelte-sno2rq"><!--[--><li class="svelte-sno2rq"><a href="/getting-started" class="svelte-sno2rq">Getting Started</a></li><li class="svelte-sno2rq"><a href="/configuration" class="svelte-sno2rq">Configuration</a></li><li class="svelte-sno2rq"><a href="/jobs" class="svelte-sno2rq">Job Types</a></li><li class="svelte-sno2rq"><a href="/docker-integration" class="svelte-sno2rq">Docker Integration</a></li><li class="svelte-sno2rq active"><a href="/metrics-setup" class="svelte-sno2rq">Metrics Setup</a></li><li class="svelte-sno2rq"><a href="/troubleshooting" class="svelte-sno2rq">Troubleshooting</a></li><li class="svelte-sno2rq"><a href="/advanced-topics" class="svelte-sno2rq">Advanced Topics</a></li><li class="svelte-sno2rq"><a href="/deployment" class="svelte-sno2rq">Deployment</a></li><li class="svelte-sno2rq"><a href="/examples" class="svelte-sno2rq">Examples</a></li><li class="svelte-sno2rq"><a href="/faq" class="svelte-sno2rq">FAQ</a></li><li class="svelte-sno2rq"><a href="/contributing" class="svelte-sno2rq">Contributing</a></li><!--]--></ul></nav><!--]--><!----> <main class="svelte-x4shkm"><div class="content svelte-x4shkm"><!----><!----><div class="content svelte-xcjbe1"><h1>Setting Up Chadburn's Metrics Endpoint</h1> <p>Chadburn includes a built-in HTTP server that exposes Prometheus-compatible metrics. 
    This allows you to monitor job executions, errors, and performance using tools like 
    Prometheus and Grafana.</p> <h2>Enabling the Metrics Endpoint</h2> <p>To enable the metrics endpoint, use the <code class="svelte-xcjbe1">--metrics</code> flag when starting Chadburn:</p> <pre class="svelte-xcjbe1"><code class="svelte-xcjbe1">chadburn daemon --config=/etc/chadburn.conf --metrics</code></pre> <p>By default, the metrics endpoint listens on port 8080. You can change this using the <code class="svelte-xcjbe1">--listen-address</code> flag:</p> <pre class="svelte-xcjbe1"><code class="svelte-xcjbe1">chadburn daemon --config=/etc/chadburn.conf --metrics --listen-address=:9100</code></pre> <h2>Available Metrics</h2> <p>The following metrics are available:</p> <ul><li><code class="svelte-xcjbe1">chadburn_scheduler_jobs</code>: Active job count registered on the scheduler</li> <li><code class="svelte-xcjbe1">chadburn_scheduler_register_errors_total</code>: Total number of failed scheduler registrations</li> <li><code class="svelte-xcjbe1">chadburn_run_total</code>: Total number of completed job runs (labeled by job name)</li> <li><code class="svelte-xcjbe1">chadburn_run_errors_total</code>: Total number of completed job runs that resulted in an error (labeled by job name)</li> <li><code class="svelte-xcjbe1">chadburn_run_latest_timestamp</code>: Last time a job run completed (labeled by job name)</li> <li><code class="svelte-xcjbe1">chadburn_run_duration_seconds</code>: Duration of all runs (labeled by job name)</li></ul> <h2>Docker Compose Setup</h2> <p>Here's a complete setup using Docker Compose that includes Chadburn with metrics enabled, 
    Prometheus for collecting metrics, and Grafana for visualization:</p> <pre class="svelte-xcjbe1"><code class="svelte-xcjbe1">version: '3'

services:
  chadburn:
    image: premoweb/chadburn:latest
    container_name: chadburn
    volumes:
      - ./example-config.ini:/etc/chadburn.conf
      - /var/run/docker.sock:/var/run/docker.sock:ro,z
      - /var/log/chadburn:/var/log/chadburn
    ports:
      - "8080:8080"  # Expose the metrics endpoint
    command: daemon --config=/etc/chadburn.conf --metrics --listen-address=:8080
    restart: unless-stopped

  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    ports:
      - "9090:9090"
    depends_on:
      - chadburn
    restart: unless-stopped

  grafana:
    image: grafana/grafana:latest
    container_name: grafana
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
    volumes:
      - grafana-storage:/var/lib/grafana
    depends_on:
      - prometheus
    restart: unless-stopped

volumes:
  grafana-storage:</code></pre> <h3>Prometheus Configuration</h3> <p>Create a <code class="svelte-xcjbe1">prometheus.yml</code> file with the following content:</p> <pre class="svelte-xcjbe1"><code class="svelte-xcjbe1">global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'chadburn'
    static_configs:
      - targets: ['chadburn:8080']</code></pre> <h2>Accessing the Metrics</h2> <p>Once Chadburn is running with metrics enabled, you can access the metrics directly at:</p> <pre class="svelte-xcjbe1"><code class="svelte-xcjbe1">http://localhost:8080/metrics</code></pre> <p>This will display all the Prometheus-compatible metrics in plain text format.</p> <h2>Example Configuration Files</h2> <p>You can download the example configuration files here:</p> <ul><li><a href="/data/docker-compose.yml" download="">docker-compose.yml</a></li> <li><a href="/data/prometheus.yml" download="">prometheus.yml</a></li> <li><a href="/data/example-config.ini" download="">example-config.ini</a></li></ul> <h2>Security Considerations</h2> <p>The metrics endpoint does not include authentication by default. In production environments, 
    you should:</p> <ul><li>Use a reverse proxy with authentication in front of the metrics endpoint</li> <li>Use network policies to restrict access to the metrics endpoint</li> <li>Consider binding to localhost only and using SSH tunneling for remote access</li></ul></div><!----><!----></div></main> <footer class="svelte-x4shkm"><div class="footer-content svelte-x4shkm"><p>Chadburn <!--[!--><!--]--> is licensed under the <a href="https://github.com/PremoWeb/Chadburn/blob/main/LICENSE" target="_blank" rel="noopener noreferrer" class="svelte-x4shkm">MIT License</a>.</p> <p>Documentation built with <a href="https://kit.svelte.dev/" target="_blank" rel="noopener noreferrer" class="svelte-x4shkm">SvelteKit</a>.</p></div></footer></div><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_1ppzwoq = {
						base: ""
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("/_app/immutable/entry/start.DMXjHYgb.js"),
						import("/_app/immutable/entry/app.B2_qOav-.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 4],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
